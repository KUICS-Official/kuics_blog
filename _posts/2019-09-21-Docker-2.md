---
title: Docker 2
published: true
---

## Chapter 2  도커로 응용프로그램을 패키징하기
### 1. 도커파일이란?
자신만의 도커이미지를 패키지하기 위해서는 도커파일이라는 텍스트파일을 작성해야합니다. 도커파일에는 이미지를 만들기 위한 모든 단계가 써있습니다. 도커파일은 단순하고 제한된 영역에만 사용되는 문법을 사용합니다. 아래의 코드는 단순한 형태의 도커파일입니다.
```
FROM ubuntu
RUN apt-get update && apt-get install nano
```
이 명령어를 Dockerfile이라는 이름의 파일을 만든 뒤 그 안에 쓰면 됩니다. 이 도커파일으로 이미지를 빌드하고 그 이미지를 이용해 컨테이너를 실행시키면 nano 패키지가 깔려있는 우분투 컨테이너를 사용할 수 있게 됩니다. ```FROM``` 명령어는 기초이미지를 지정합니다. 이 기초이미지로부터 이후의 도커파일의 내용을 이용해 변화가 일어나게 됩니다. 이 경우에는 nano를 설치하기 위한 두 개의 ```apt```명령어입니다.</br>
이미지를 빌드하기 위해서 ```docker image build``` 명령어를 이용해야 합니다. 이 명령어를 실행시킬 때 이미지를 구분하기 위한 레포지토리 이름과 도커가 이미지를 빌드하기 위해 사용할 도커파일의 위치를 적어줘야 합니다. 또한 이미지를 라벨은 이용해 태그할 수 있습니다. 따라서 우리는 한 레포지토리에서 동시에 여러 버전의 이미지를 사용할 수 있습니다.(e.g. ```ubuntu:16.04```와 ```ubuntu:18.04 ```)```docker image build --tag kuics/ubuntu-with-nano .```명령어를 사용하면 현재 디렉토리에 있는 도커파일을 사용하여 이미지를 빌드합니다.
![Result of docker image build --tag kuics/ubuntu-with-nano](/blog/assets/2019-09-21-Docker-2/docker_image_build_ubuntu-with-nano_1.png)
>Dockerfile은 따로 옵션을 주지 않았을 때의 기본 이름입니다. --file 옵션을 이용하면 임의의 이름의 파일을 이미지 빌드를 위한 도커파일로 사용할 수 있습니다. 예를 들어 server.dockerfile을 이미지 빌드를 위한 도커파일로 사용하고 싶다면 ```docker image build --file server.dockerfile```명령어를 사용하면 됩니다.