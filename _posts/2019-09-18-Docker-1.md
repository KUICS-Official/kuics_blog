---
title: Docker 1
published: true
---

# Docker 1
## Chapter 0 환경
Ubuntu 18.04 LTS

## Chapter 1 도커란?
### 1. 도커를 설치하기
도커는 크로스 플랫폼입니다. 따라서 도커는 리눅스, 윈도우, 맥 모두에서 작동합니다.</br>
https://docs.docker.com 에서는 각 OS에 따른 도커 설치가이드를 제공하고 있습니다.
>윈도우에서는 가상화 기술을 허용됨으로 바꾸어 줘야합니다. BIOS에서 VT-x를 허용됨 상태로 바꾸세요.

도커를 설치한 후에 쉘을 켜주세요. (윈도우의 경우에는 cmd, powershell 모두 가능합니다.)</br>
도커를 설치한 후에 ```docker version``` 명령어를 실행시켜면 아래와 같은 결과를 볼 수 있을 것입니다.
![Result of docker version](/_src/docker_version.png)

### 2. 컨테이너를 실행시키기
도커이미지는 패키지되어 있는 응용프로그램입니다. 이 이미지는 Github를 사용하는 것과 마찬가지로 Push, Pull 할 수 있습니다. 이미지는 응용프로그램 패키지(e.g. nginx, mariadb, etc.)를 저장하는 단위입니다. 응용프로그램을 시작하기 위해서는 먼저 이미지를 이용해 컨테이너를 실행시켜야 합니다.</br>
이미지는 일반적으로 단일 프로세스를 실행시키기 위해서 만들어 집니다. 만들고자 하는 응용프로그램이 다른 서비스와 함께 작동해야 한다면 컨테이너를 이용해 함께 작동하도록 할 수 있습니다. 이는 Chapter 5에서 다룰 것 입니다.</br>
이미지를 이용해 컨테이너를 실행시킬 때, 응용프로그램은 잠깐만 작동하고 꺼질 수도 있고, 백그라운드 프로세스처럼 오랬동안 작동할 수도 있습니다. 또한, 실제 컴퓨터와 같이 상호작용가능할 수도 있습니다.

### 3. Hello World
가장 단순한 컨테이너부터 실행시켜 보겠습니다. 도커가 설치되어 있고 인터넷에 연결되어 있다면 ```docker container run hello-world```라는 명령어를 실행시킬 수 있을 것입니다. 결과는 아래와 같을 것입니다.
![Result of docker container run hello-world](/_src/docker_container_run_hello-world.png)
결과는 단순해보이지만 컨테이너를 실행시킬때 많은 일들이 일어납니다.
* 로컬 도커 클라이언트가 도커 서버에 hello-world라는 이름의 컨테이너를 실행시키라는 요청을 보냅니다.
* 도커 서버는 요청받은 이미지가 캐시되어 있는지 확인합니다. 캐시되어 있지 않다면 도커 허브에서 이미지를 다운로드 받습니다.
* 이미지가 로컬에 다운받아지면 도커 서버는 이미지를 이용해 컨테이너를 실행시킵니다. 또한, 출력을 도커 클라이언트로 전달합니다.
이 이미지에서 컨테이너 내부의 프로세스는 콘솔에 출력을 한 후에 끝납니다. 컨테이너는 내부에서 동작 중인 프로세스가 없으므로 컨테이너에서 나가게 됩니다. 이를 현재 실행 중인 컨테이너의 목록을 확인하는 명령어인 ```docker container ls```를 이용해 확인할 수 있습니다. 아래에서 보이다시피 hello-world 컨테이너는 동작을 멈추었으므로 목록에 나타나지 않습니다.
![Result of container ls](/_src/docker_container_ls.png)
>```docker container ls --all```명령어를 사용하면 실행 중이지 않은 컨테이너도 확인할 수 있습니다.

이러한 실행 후에 실행을 멈추는 형태의 컨테이너는 상당히 유용합니다. 이러한 컨테이너는 백업과 같은 반복적인 작업에 사용될 수 있습니다. 하지만, 전에 언급했다시피 컨테이너는 오래동안 작동하는 백그라운드 프로세스으로도 잘 작동합니다.

### Hello Nginx
Nginx는 가볍고, 강력한 오픈소스 HTTP 서버입니다. Nginx는 설정하기 쉽고, 용량이 작기 때문에 컨테이너로 사용하기에 적절합니다.</br>
도커 허브에는 Nginx팀에서 공식적으로 지원하는 [공식 Nginx이미지](https://hub.docker.com/_/nginx/)가 있습니다. ```docker container run nginx:alpine```명령어를 이용하면 Alpine 리눅스를 이용하는 Nginx 도커 이미지의 가장 작은 버전을 실행시킬 수 있습니다.